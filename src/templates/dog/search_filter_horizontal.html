{%- macro first_line() -%}
<div class="row">
        <div class="col-sm-5">
                  <table style="width:100%"><tr>
                  <td>
                      <label for="{{form.breed.name}}" class="control-label" style="font-weight:normal">Порода</label>
                      <div class="input-group">
                          <input name="{{form.breed.name}}" class="form-control" placeholder="Введите или выберите породу", value="{{form.breed.data or ''}}" class="form-control" autocomplete="off" id="{{form.breed.id}}">

                          <div class="input-group-btn">

                             <button id="breed_picker" title="Выбрать породу из списка" type="button" class="btn btn-default"><b>&hellip;</b></button>
                          </div>
                      </div>
                      {%from "breed_picker.html" import dog_breed_picker %}

                       {{dog_breed_picker(form.breed.id, "breed_picker")}}
                  </td>
                  </tr></table>
        </div>
        <div class="col-sm-7">
        <table style="width:100%"><tbody><tr>
           
            <td>
                <label for="{{form.city.name}}" class="control-label" style="font-weight:normal">Местоположение</label>
              <input name="{{form.city.name}}" class="form-control" placeholder="Укажите населенный пункт", value="{{form.city.data or ''}}" class="form-control" autocomplete="off" id="{{form.city.id}}">
            </td>
            <!-- <td style="width:20px;padding-top:25px" class="text-center">+</td> -->
            <td style="width:20px;padding-top:30px" class="text-center">+</td>
            <td style="width:110px">
              <label for="{{form.distance.name}}" class=" control-label" style="font-weight:normal">удаленность</label>
              <div class="input-group">
                
                <input class="form-control" name="{{form.distance.name}}" placeholder="150" value="{{(form.distance.default or "") if form.distance.name not in request.args else form.distance.data or ''}}" class="form-control" id="{{form.distance.id}}">  
                <span class="input-group-addon">км</span>
              </div>
            </td>
          </tr></tbody></table>
        </div>
      </div>
{%-endmacro-%}

{%- macro second_line() -%}
   <!-- price -->
      <div class="row" style="margin-top:25px">
        <div class="col-sm-5">
          <table style="width:100%">
            <tr>
              <td style="width:45px;">
                <label for="{{form.price_from.name}}" class="control-label" style="font-weight:normal">Цена</label>
              </td>
              <td style="width:130px">
                <div class="input-group input-group-md">
                <input class="form-control" name="{{form.price_from.name}}" placeholder="от" value="{{form.price_from.data or form.price_from.default or ''}}" class="form-control" id="{{form.price_from.id}}">  
                <span class="input-group-addon" title="Рубль"><i class="fa fa-ruble"></i></span>
              </div>
              </td>
              <td style="width:25px;" class="text-center small">&ndash;</td>
              <td style="width:130px;">
               <div class="input-group input-group-md">
                <input class="form-control" name="{{form.price_to.name}}" placeholder="до" value="{{form.price_to.data or form.price_to.default or ''}}" class="form-control" id="{{form.price_to.id}}">  
                <span class="input-group-addon rur" title="Рубль"><i class="fa fa-ruble"></i></span>
              </div>  
              </td>
            </tr>
          </table>
          </div>

          <div class="col-sm-7 text-right">
          </div>
          
      </div>
{%- endmacro -%}


{%- macro header() -%}

 <p class="bg-info lead" style="position:absolute;padding:10px 20px 0px 20px; border-radius:10px 10px 0px 0px;top:-39px; left:0px; background-image: linear-gradient(to bottom,#F4F6FC,#d9edf7);"><small>Поиск объявлений</small></p>

{%- endmacro -%}

{%- macro footer() -%}
  <div style="
margin: 20px -20px 0 -20px;
border-radius: 0px 0px 10px 10px;
padding:0px 20px;
background-image: linear-gradient(to bottom,#F4F6FC,#d9edf7);height:40px" >
    <ul class="list-inline" style="">
      <li>
         {{form_field(form.photo)}}
      </li>
      <li>
        {{form_field(form.video)}}
      </li>
      <li>
        {{form_field(form.champion_bloodlines)}}
      </li>
  </ul>
  </div>
{%- endmacro-%}

{%- macro actions() -%}
  <div style="position:absolute; right:20px; bottom:60px">
      <a type="reset" class="btn btn-md btn-link" href="{{request.path}}"><span title="сбросить текущий поиск">Сбросить</span></a>
          <button type="submit" class="btn btn-primary" style=""><i class="fa fa-search"></i>&emsp;Показать</button>
  </div>
{%- endmacro -%}

{#<h4 class="text-semi-muted">Поиск объявлений о продаже породистых щенков и собак</h4>#}


<div class="bg-info" style="box-shadow:2px 2px 5px 0px #ccc; border-radius:0px 10px 10px 10px; margin-top:50px;">

  

      {% from "forms.html" import form_field_boolean, form_field, action_buttons  %}

      <form action="" method="get" class="" style="padding:15px 20px 0px 20px;position:relative" role="form">

      {{header()}}

      {{first_line()}}

      {{second_line()}}

      {{footer()}}

      {{actions()}}
      

    </form>

</div>





<script type="text/javascript">


      //location with autocomplete built on typeahead.js
      $(function(){

        $("#{{form.distance.id}}").inputmask("integer", { allowMinus: false, allowPlus: false , rightAlignNumerics: false});

        $("#{{form.price_from.id}}").inputmask("integer", { allowMinus: false, allowPlus: false, rightAlignNumerics: false, autoGroup: true, groupSeparator: " ", groupSize: 3});

        $("#{{form.price_to.id}}").inputmask("integer", { allowMinus: false, allowPlus: false, rightAlignNumerics: false, autoGroup: true, groupSeparator: " ", groupSize: 3});

        
          $("#{{form.breed.id}}").typeahead(
          povodochek.typeahead(
          "{{url_for('ajax_typeahead_dog')}}",
          "{{form.breed.id}}")); //typeahead  
        
          $("#{{form.city.id}}").typeahead(
          povodochek.typeahead(
          "{{url_for('ajax_typeahead_location')}}",
          "{{form.city.id}}")); //typeahead  

          
           $(".ds-header-breed").click(function(){
              $("#{{form.breed.id}}").val("").focus();
          });

           $(".ds-header-location").click(function(){
              $("#{{form.city.id}}").val("").focus();
          });
        
      });

  </script>